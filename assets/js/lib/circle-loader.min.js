function CircleLoader(){this.svgWidth=300,this.iWidthCircle=50,this.τ=2*Math.PI,this.fontSize=20,this.min=0,this.max=100}CircleLoader.prototype=function(){var t=function(t,i,a){this.oldAngle=a?a:this.min;var s=d3.interpolate(this.oldAngle,i),e=d3.interpolateNumber(this.oldAngle,i);t.attrTween("d",function(t){return function(i){t.endAngle=s(i);text.text(d3.format(".1f")(e(i)*this.max/this.τ)+" %");return arc(t)}}),this.oldValue=i*this.max/this.τ},i=function(){this.foreground.transition().duration(500).ease("back-out").attr("transform","scale(2.1)"),this.background.transition().duration(500).ease("back-out").attr("transform","scale(2.1)")};return{init:function(a,s,e,n,r){this.value=e,this.svgWidth=n?n:this.svgWidth,this.fontSize=r?r:this.fontSize,this.iWidthCircle=this.svgWidth/6,arc=d3.svg.arc().innerRadius(this.iWidthCircle).outerRadius(this.iWidthCircle+3).startAngle(0),svg=d3.select("#"+a).append("svg").attr("width",this.svgWidth).attr("height",this.svgWidth).attr("class","svg_cercles").append("g").attr("transform","translate("+this.svgWidth/2+","+this.svgWidth/2+")"),background=svg.append("path").datum({endAngle:τ}).attr("class",s+"_back").attr("d",arc),foreground=svg.append("path").datum({endAngle:τ}).attr("class",s+"_front").attr("d",arc),svg.append("text").attr("text-anchor","middle").attr("font-size",this.fontSize+"px").attr("dy",".35em"),text=svg.select("text").attr("class","circle-txt"),foreground.transition().duration(1e3).call(t,this.value*this.τ/this.max).each("end",i)},update:function(a){this.value=a,foreground.transition().duration(1e3).call(t,this.value*this.τ/this.max,this.oldValue*τ/this.max).each("end",i)}}}();
